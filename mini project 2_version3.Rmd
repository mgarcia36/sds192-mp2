---
title: "Mini Project 2"
author: "Diana Fierros-Pina, Karen Diaz, Marta Garcia"
date: "March 20, 2017"
output: html_document
---

# Possible title? "Where did the people's political contributions go to in 2011?"
## Need contributions and say positive


```{r, message=FALSE}
# Packages needed
require(tidyverse)
require(ggthemes)
require(plyr)
require(lubridate)
```


```{r, include=FALSE}
# Datasets being used
load("committees.rda")
load("individuals.rda")

```


### Have you ever wondered where regular folks like you and I have politically contributed to in the year 2011? Well, look no further, you are about to see three different states - red, blue and swing - in which committees were most popular to contribute by individuals. 

### Background: The "committees" and "individuals" datasets helped us answer this question with some filtering, we were able to cut these immense and overwhelming datasets into a "smaller" dataset with observations that we were meant to answer the question in question. 

### Why the year 2011? We were interested to see what committees individuals were placing their money pre-election year. Would it be to for Obama's Re-election Campaign? Would it be for Romney's Presidential Election Campaign? Or Ron Paul's Presidential Election? 

### Restrictions: The (individual's) occupations included in this dataset range from homemaker to veternarian to teacher, and almost everything in between. These contributions ranged from $0 to $750,000, but we decided to restrict this range from $0 to $5000. This range is subjective to what we think is a "realistic" measure to what people can "afford" to contribute to political committees and see how much these smaller contributions add up to in the end. 


```{r, message=FALSE, warning=FALSE}
# The following function will make a new data frame called "contributions_by_state"
# The function will allow the user to input a state abbreviation (including DC) or "state_arg" to get the top 10 committees that individuals within state have donated to
# mutate(): mutates variable "transaction_dt" from individuals data frame to new variable transaction date, so it is a 'date' type
# filter(): filters rows that have the desired state, entity_type, transaction_date and transaction_amt
# inner_join: to join individuals and committees data frames by column "cmte_id"
# select() selects specific columns from data frame that we're interested in
# group_by(): groups the dataframe by committee name, in order to
# summarise(): summarise and sum all the transaction amounts of each committee and finally
# arrange(): arrange these committees in descending order to have the most contributed committees at the top
# slice(): selects top 10 committees at the top of the tbl

contributions_by_state <- function(state_arg){
  individuals %>%
  mutate(transaction_date = mdy(transaction_dt)) %>%
  filter(state == state_arg, 
         entity_type == "IND",
         transaction_date >= "2011-01-01",
         transaction_date <= "2011-12-31",
         transaction_amt >= 0 & transaction_amt <= 5000) %>%
  inner_join(committees, by = "cmte_id") %>%
  select(transaction_type, 
         entity_type, 
         state, 
         transaction_date, 
         transaction_amt,
         cmte_name)%>%
    group_by(cmte_name) %>%
    summarise(com_groups = sum(transaction_amt)) %>%
    arrange(desc(com_groups)) %>%
    slice(1:10)

}

```



### This is a model of what we wanted. Can be deleted after everything is ready to go! :)
```{r, message=FALSE, warning=FALSE}

#The following will make up the new data frame "contributions_by_all"
#mutate() mutates variable "transaction_dt" from individuals data frame to new variable transaction date, so it is a 'date' type
#filter() filters rows that have the desired state, entity_type, transaction_date and transaction_amt
#inner_join to join individuals and committees data frames by column "cmte_id"
#select() selects specific columns from data frame that we're interested in

contributions_by_all <- individuals %>%
  mutate(transaction_date = mdy(transaction_dt)) %>%
  filter(state == "NY", 
         entity_type == "PAC",
         transaction_date >= "2011-01-01",
         transaction_date <= "2011-12-31",
         transaction_amt >= 0 & transaction_amt <= 5000) %>%
  inner_join(committees, by = "cmte_id") %>%
  select(transaction_type, 
         entity_type, 
         state, 
         transaction_date, 
         transaction_amt,
         cmte_name,
         cmte_id)%>%
  group_by(cmte_name) %>%
  summarise(com_groups = sum(transaction_amt)) %>%
  arrange(desc(com_groups))
  
```

#-------------------------------------------
### Red State in 2011: Alaska (Diana)
The first state we will examine is Alaska. Historically, Alaska entered the union as a Democratic state but has "supported Republicans in presidential elections since statehood. The Republican Party has won their electoral college votes in all but one election, this election was in 1964" (). 

Why Alaska? In the year 2011, there were 12 red states, but Alaska was chosen because geographically it is apart from the other 49 states. It would be interesting to see where Alaskans place their contributions.

```{r, message=FALSE, warning=FALSE}
# The following will make up the new data frame "contributions_by_alaska" that came about by using the function "contribution_by_state"

contributions_by_alaska <- contributions_by_state(state_arg = "AK")

```

### +1 for explaining in a single coherent sentence what we can learn from these data
During the 2011 federal election cycle, these were the top ten committees and the amount of money received, by each respectively, from contributions made by individuals in the state of Alaska.
```{r, fig.width = 15, fig.height = 8}

# Using ggplot to generate bar plot of "Committees that Received Contributions Made By Individuals in 2011"


Alaska_bar_chart <- ggplot(contributions_by_alaska, aes(cmte_name, com_groups)) +
  geom_bar(stat = "identity", fill = "olivedrab") +
  # Title of graph
  ggtitle("Committees that Received Contributions Made By Individuals in 2011") +
  # Formatting the bar chart "plane"
  theme_hc() +
  theme(axis.text.x = element_text(color = "black", 
                           size = 17, family = "Trebuchet MS", face = "bold"),
        axis.text.y = element_text(color = "black", 
                           size = 16, family = "Trebuchet MS", face = "bold"),
        axis.ticks.x = element_blank(),
        axis.ticks.y = element_blank(),
        plot.title = element_text(size = 25, face="bold", family = "Trebuchet MS"),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        axis.title.x = element_text(face = "bold", size = 18),
        axis.title.y = element_text(face = "bold", size = 18)) + 
  # Formatting the x-axis
  scale_x_discrete(name = "Recipients of Contributions",
                     expand = c(0,0),
                     labels = c("ALASKA DEMOCRATIC PARTY" = "AK DEM. PARTY",
                                "ALASKA REPUBLICAN PARTY" = "AK REP. PARTY",
                                "ALASKANS FOR BEGICH 2014" = "AK FOR BEGICH '14",
                                "ALASKANS FOR DON YOUNG INC." = "AK FOR DON YOUNG INC.",
                                "DNC SERVICES CORPORATION/DEMOCRATIC NATIONAL COMMITTEE" = "DNC",
                                "GCI PAC" = "GCI PAC",
                                "OBAMA FOR AMERICA" = "OBAMA FOR AMERICA",
                                "REPUBLICAN NATIONAL COMMITTEE" = "RNC",
                                "ROMNEY FOR PRESIDENT INC." = "ROMNEY FOR \nPRESIDENT",
                                "RON PAUL 2012 PRESIDENTIAL CAMPAIGN COMMITTEE INC." = "RON PAUL '12 \nPRES. CAMPAIGN"
                                 )) +
  # Formatting the y-axis
  scale_y_continuous(name = "Total Amt. of Contributions",
                     expand = c(0,0),
                     labels = c("0" = "$0",
                              "25000" = "$25k",
                              "50000" = "$50k",
                              "75000" = "$75k",
                              "100000" = "$100k")) 

Alaska_bar_chart

```


### +1 blog post text provides context or background useful in interpreting the graphic

The data visualization previously presented is a bar plot regarding the contributions made in the state of Alaska in the year 2011. Each bar represents one committee and the height of the bar represents the $ amount of all the contributions made by individuals. 
The key of this visualization is to allow the user to explore the different committees. 
The committees included are: Actblue, Alaska Democratic Party, Alaskans for Begich 2014, Alaskans for Don Young Inc., DNC (DNC Services Corporation/Democratic National Committee), Nat. Assoc. of Realtors (National Association of Realtors Political Action Committee), Obama for America, RNC (Republican National Committee), and Romney for President Inc., Ron Paul '12 Pres. Campaign.

It's important to not that even though Alaska is a republican state, 4 out of 10 of the committees (in this visualization) are Democrats, which are the Alaskan Democratic Party, Alaskans for Begich 2014, DNC and Obama for America. Although Actblue is independent of the Democratic Party itself and does not endorse individual candidates, this committee enables anyone to raise money on the Internet for the Democratic Party candidates of their choice. One of the committees is libertarian which is the committee named Ron Paul '12 Presidential Campaign. 

So, even though Alaska is a republican state, there is a divide in idealogies throughout Alaskans in where they wish their contributions should go to.


#-------------------------------------------


#-------------------------------------------
<<<<<<< HEAD
=======
### Blue State in 2011: California (Karen)

The second state that is examined is California. California was chosen because it is one of the largest blue states in comparison to other blue states in America. From 1952 until 1992, Republicans won California in every election except the election of 1964. The immigration of Hispanic Americans and Asian Americans and migration of northern liberals, who tend to vote Democratic, and the flight of white, middle and upper-middle class suburbanites out of the state shifted the balance in favor of the Democratic Party. 

What we also wanted to investigate with California is the true diversity of political alignment due to its immense size and population. In addition, because of it's recent shift from Republican to Democratic ideology in 1992, it would be interesting to see what are the commitees most contributed to and the diversity of campaigns/causes Californians support.


```{r, message=FALSE, warning=FALSE}
# The following will make up the new data frame "contributions_by_cali"
# mutate() mutates variable "transaction_dt" from individuals data frame to new variable transaction date, so it is a 'date' type
# filter() filters rows that have the desired state, entity_type, transaction_date and transaction_amt
# inner_join to join individuals and committees data frames by column "cmte_id"
# select() selects specific columns from data frame that we're interested in


contributions_by_cali <- individuals %>%
  mutate(transaction_date = mdy(transaction_dt)) %>%
  filter(state == "CA", 
         entity_type == "IND",
         transaction_date >= "2011-01-01",
         transaction_date <= "2011-12-31",
         transaction_amt >= 0 & transaction_amt <= 5000) %>%
  inner_join(committees, by = "cmte_id") %>%
  select(transaction_type, 
         entity_type, 
         state, 
         transaction_date, 
         transaction_amt,
         cmte_name,
         cmte_id)

tallying_cali <- contributions_by_cali %>%
  group_by(cmte_name) %>%
  tally(sort = TRUE)

contributions_by_cali
tallying_cali
```


```{r, fig.width = 15, fig.height = 10}

# Using ggplot to generate bar plot of the "Top Ten Committees Donated to by Individuals in 2011 (California)"

contributions_by_cali <- contributions_by_state(state_arg = "CA")

ggplot(contributions_by_cali, aes(cmte_name, com_groups)) +
  ggtitle("Committees that Received Contributions Made By Individuals in 2011") +
  geom_bar(stat = "identity", fill = "olivedrab") +
  theme_hc() +
  theme(axis.text.x = element_text(color = "black", 
                           size = 14, family = "Trebuchet MS", angle = 90, face = "bold"),
        axis.text.y = element_text(color = "black", 
                           size = 14, family = "Trebuchet MS", face = "bold"),
        axis.ticks.x = element_blank(),
        axis.ticks.y = element_blank(),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        plot.title = element_text(lineheight = 1, face="bold")) + 
  # Committees x- axis
  scale_x_discrete(name = "Recipients of Contributions",
                     expand = c(0,0),
                     labels = c("ACTBLUE" = "ACTBLUE",
                                "DNC SERVICES CORPORATION/DEMOCRATIC NATIONAL COMMITTEE" = "DNC",
                                "DEMOCRATIC SENATORIAL CAMPAIGN COMMITTEE" = "DEMOCRATIC SENATORIAL CAMPAIGN COMMITTEE",
                                "DEMOCRATIC CONGRESSIONAL CAMPAIGN COMMITTEE" = "DEMOCRATIC CONGRESSIONAL CAMPAIGN COMMITTEE",
                                "EMILY'S LIST" = "EMILY'S LIST",
                                "OBAMA FOR AMERICA" = "OBAMA FOR AMERICA",
                                "OBAMA VICTORY FUND 2012" = "OBAMA VICTORY FUND 2012",
                                "REPUBLICAN NATIONAL COMMITTEE" = "RNC",
                                "ROMNEY FOR PRESIDENT INC." = "ROMNEY FOR PRESIDENT",
                                "RON PAUL 2012 PRESIDENTIAL CAMPAIGN COMMITTEE INC." = "RON PAUL '12 PRES. CAMPAIGN"
                                 )) +
  # Contribution Amount y-axis
  scale_y_continuous(name = "Total Amt. of Contributions",
                     labels = c("0" = "$0",
                              "25000" = "$25k",
                              "50000" = "$50k",
                              "75000" = "$75k",
                              "100000" = "$100k")) 

                                      



```


### +1 blog post text provides context or background useful in interpreting the graphic

The second data visualization presented is a bar plot regarding the contributions made in the state of California in the year 2011.The difference here, is that California is historically known for being a blue state during election cycles in comparison to Alaska. 
 
The committees included are: Actblue, Democratic Congressional Campaign Committee, Democratic Senatorial Campaign Committee, Democratic Congressional Campaign Committee, DNC (DNC Services Corporation/Democratic National Committee), Emily's List, Obama Victory Fund 2012, Obama for America, RNC (Republican National Committee), Romney for President Inc., Ron Paul '12 Pres. Campaign.

Here, we see a strong alingment to democratic ideology as 7 of the top ten committees that received contributions from individuals are Democrat. However, it is important to note that although a liberal idealogy is most common, there is still a  Republican presence shown through the Romney for President campaign, which received an almost equal amount of contributions as the Obama for America committee. Rick Perry was also a Republican entity that was present. There is also a Libretarian presence represented through the Ron Paul '12 Pres. Campaign. So, we can say there are a variety of political ideologies represented. Another important thing to note is that there are more contributions being made to presidential campaigns than those for the RNC, DNC, Democratic Senatorial Campaign Committee, etc. In this case, it is most important to individuals in Califonia to make monetary contributions to the face of America, the president, than it is to make contributions to other political branches such as the senate, congress, etc. This is interesting because typically, these branches of the government have the most say in regards to legislation and health care, the federal budget, etc. One last interesting point to make is the ammount of support directly made to the Obama campaign in this state, which demonstates the preferred presidential candidate.


### +1 for explaining in a single coherent sentence what we can learn from these data
The main idea of this bar chart, is to capture the top ten committees and the amount received (by each) from donations made by individuals in 3 specific states during the 2011 federal election cycle. 


#-------------------------------------------


#-------------------------------------------
### Swing State in 2011: Florida (Marta)

The third state we will examine is Florida, or a notoriously known swing state. 
During the 2011 federal election cycle, these were the top ten committees and the amount of money received, by each respectively, from contributions made by individuals in the state of Florida.
```{r}
contributions_by_florida <- contributions_by_state(state_arg = "FL")
```


```{r, fig.width = 8, fig.height = 3}
# Using ggplot to generate bar plot of "Committees that Received Contributions Made by Individuals in 2011 (Florida)"

florida_plot <- ggplot(contributions_by_florida, aes(cmte_name, com_groups)) +
  ggtitle("Committees that Received Contributions Made by Individuals in 2011 (Florida)") +
  geom_bar(stat = "identity", fill = "olivedrab") +
  theme_hc() +
  theme(axis.text.x = element_text(color = "black", 
                           size = 11, family = "Trebuchet MS", face = "bold"),
        axis.text.y = element_text(color = "black", 
                           size = 11, family = "Trebuchet MS", face = "bold"),
        axis.title = element_text(family = "Trebuchet MS", face = "bold"),
        axis.ticks.x = element_blank(),
        axis.ticks.y = element_blank(),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        plot.title = element_text(lineheight = 1, face="bold", family = "Trebuchet MS"),
        plot.margin = unit(c(1,.5,1,1), "cm")) +
  # Committees x- axis
  scale_x_discrete(name = "Recipients of Contributions",
                     expand = c(0,0),
                     labels = c("ROMNEY FOR PRESIDENT INC." = "ROMNEY \nFOR PRESIDENT",
                                "FRIENDS OF MIKE H" = "FRIENDS OF \nMIKE H",
                                "BILL NELSON FOR U S SENATE" = 
                                  "BILL NELSON \nFOR SENATE",
                                "OBAMA FOR AMERICA" = "OBAMA FOR AMERICA",
                                "FRIENDS OF GEORGE LEMIEUX" = "FRIENDS OF \nGEORGE LEMEIEUX",
                                "OBAMA VICTORY FUND 2012" = 
                                  "OBAMA VICTORY \nFUND 2012",
                                "REPUBLICAN NATIONAL COMMITTEE" = "RNC",
                                "LOIS FRANKEL FOR CONGRESS" = 
                                  "LOIS FRANKEL \nFOR CONGRESS",
                                "FRIENDS OF PATRICK MURPHY" = "FRIENDS OF \nPATRICK MURPHY",
                                "ADAM HASNER FOR US HOUSE" = 
                                  "ADAM HASNER \nFOR HOUSE"
                                 )) +
  scale_y_continuous(name = "Total amt of contributions",
                     expand = c(0,0),
                     labels = c("0" = "$0",
                                "1000000" = "$1M",
                                "2000000" = "$2M",
                                "3000000" = "$3M",
                                "4000000" = "$4M",
                                "5000000" = "$5M"
                                )) 

florida_plot

```
+1 blog post text provides context or useful information in interpreting the graphic

The third data visualization presented is a bar plot regarding the contributions made in the state of Florida in the year 2011. The difference here is that Florida has been known for being a swing state during election cycles in comparison to both California and Alaska. Candidates representing both main parties tend to spend most their time campaigning in swing states because they know they cannot guarantee votes from these states the same way Democrats can guarantee their votes in California and Republicans can guarantee their votes in Alaska.  
 
The committees included are: Adam Hasner for US House, Bill Nelson for US Senate, Friends of George Lemieux, Friends of Mike H, Friends of Patrick Murphy, Lois Frankel for Congress, Obama for America, Obama Victory Fund 2012, RNC (Republican National Committee), Romney for President Inc.

Here, we see neither a strong alignment to the Republican party, nor one to the Democratic party. Upon futher research, we find out Adam Hasner, George Lemeieux, Mike Haridopolos, the RNC (Republican National Committee) and Romney for President are all committees supporting Republican candidates, with the remaining 5 supporting Democratic candidates. Although Obama for America does sit within the top 4 committees contributed to, the amounts of money contributed to Romney, Mike Haridopolos, and Bill Nelson are so vast that the $1,948,666 donated to Obama for America looks small and insignificant. However, if we were to sum the Obama for America and Obama Victory Fund 2012 contributions, the sum would be slightly greater than Bill Nelson's amount, who was also a Democratic candidate. Despite all the contributions made to Romney's campaign, Obama ending up winning Florida's electoral votes in the 2012 election. Another important fact to note is that Bill Nelson was running for his third term in the Senate, so he was an incumbent. There appears to be a divide in ideologies within Florida.





#Conclusion
By only focusing on three states with different political alignements, we wanted to explore whether a political alliance would affect individual committee contributions under $5K. We found that while a specific state, such as California, may have a strong standing with Democratic committee contributions, states such as Alaska and Florida are bit more varied and have committee contributions to both Republican and Democratic committees. Some of the information we discovered surprised us, and some did not. 






























































#---------------------------------
